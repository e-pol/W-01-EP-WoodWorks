<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<<<<<<< HEAD
<script type="text/javascript">
	var arr = [];

function addFilter(property, value) {
	var funcBody = " return el[" + property + "] == " + value + ";" ;
	var func = new Function("el", funcBody);
	arr.push(func);
}

function addFilterClosure(property, value) {
	alert(property + ":" + value);

	var func = function(el) {
		return el[property] == value;
	}

	arr.push(func);
}

var prop = "area";
var val = 100;

// addFilter(prop, val);
addFilterClosure(prop, val);

alert(arr[0]);

prop = "floor";
val = 2;

// addFilter(prop, val);
addFilterClosure(prop, val);

alert(arr[0]);
alert(arr[1]);

</script>
=======

<script type="text/javascript">

	function Catalog(id, items) {
		this._id = id;
		this._node = document.getElementById(id);
		this._items = items;
		this._selection = items;
		this._filtersByValue = {};
		this._filtersByInterval = {};
		this._filters = [];

		console.log("Created: Object Catalog id=\"" + this._id + "\"");
	}

	Catalog.prototype.addFilter = function(property, value) {
		
		function makeFilter(prop, val) {
			return function(el) {
				return el[prop] == val;
			};
		}

		var func = makeFilter(property, value);		

		/*var funcBody = "return el[" + property + "] == " + value + " ;" ;
		var func = new Function ("el", funcBody);*/

		// alert(func);

		this._filters.push(func);
		alert(this._filters[0]);		
	}

	var hpCatalog = new Catalog("HousePlans");

	hpCatalog.addFilter("area", 100);

	console.log(hpCatalog._filters[0]);

	function makeFilter(prop, val) {
			return function(el) {
				return el[prop] == val;
			};
		}

		var property = "area";
		var value = 100;

		var func = makeFilter(property, value);

		alert(func);

</script>

>>>>>>> e5ac638a5932663c6688ed7e9412f91d76c05991
</body>
</html>